### Variables d'environnement
@baseUrl = http://localhost:5265
@clubId = {{$guid}}
@authToken = {{login.response.body.accessToken}}

### 1. Connexion pour obtenir le token
# @name login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "admin@rotaryclub.com",
  "password": "Admin123!"
}

### 2. Envoyer le calendrier du mois par email
POST {{baseUrl}}/api/CalendrierEmail/envoyer-calendrier
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "clubId": "{{clubId}}",
  "mois": 8,
  "messagePersonnalise": "Chers membres, voici le calendrier du mois d'août. N'oubliez pas de confirmer votre présence aux réunions importantes.",
  "envoyerATousLesMembres": true,
  "emailsDestinataires": []
}

### 3. Envoyer le calendrier du mois actuel (sans message personnalisé)
POST {{baseUrl}}/api/CalendrierEmail/envoyer-calendrier
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "clubId": "{{clubId}}",
  "mois": {{$datetime 'MM'}},
  "envoyerATousLesMembres": true,
  "emailsDestinataires": []
}

### 4. Envoyer le calendrier à des emails spécifiques
POST {{baseUrl}}/api/CalendrierEmail/envoyer-calendrier
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "clubId": "{{clubId}}",
  "mois": 9,
  "messagePersonnalise": "Calendrier spécial pour les membres du bureau.",
  "envoyerATousLesMembres": false,
  "emailsDestinataires": [
    "president@rotaryclub.com",
    "secretaire@rotaryclub.com",
    "tresorier@rotaryclub.com"
  ]
}

### 5. Exemple avec un club spécifique (remplacer par un vrai ClubId)
POST {{baseUrl}}/api/CalendrierEmail/envoyer-calendrier
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "clubId": "12345678-1234-1234-1234-123456789012",
  "mois": 8,
  "messagePersonnalise": "Calendrier du mois d'août - Réunions importantes à ne pas manquer !",
  "envoyerATousLesMembres": true,
  "emailsDestinataires": []
}
